==========================
Wayland integration tests
==========================

This project aims to create small framework for simple testing
of interaction between wayland's display and client.

Directory structure:
TOP \
    | src/               - WIT framework sources
    | test/              - tests, including self-tests
          | test-runner/ - testing framework
    | tools/             - tools for manipulating with tests outcomes

Part of this code was taken from wayland test-suite (namely test/test-runner.c,
test/test-runner.h and test/test-helpers.c). Backtrace function in test-runner.c
is from weston.


=== Dependencies ===
Required:
 wayland-server
 wayland-client

Optional:
 libunwind


=== Building WIT ===
Autotools requierments:

 automake 1.11
 autoconf 2.64
 libtool 2.2

Getting WIT, compiling and running:

    $ git clone https://github.com/mchalupa/wayland-integration-tests
    $ cd wayland-integration-tests
    $ ./autogen.sh
    $ make
    $ make check

When only make is run then the framework is compiled. Tests are run by make check.


=== Running WIT ===

    $ make check

will compile and run all tests in test/ directory.

You can use tools/colorlog to colorize tests output. When no argument
to colorlog is given, it reads from stdin, otherwise it searches for
files in . or test/ directory. Also you don't have to give it full name,
because it looks for "arg".log and "arg"-test.log.
Another parameters can be pattern that it should look for and colour
of text matching the pattern (default = yellow).
Examples:
    $ tools/colorlog abc-test.log  # following three command will do the same
    $ tools/colorlog abc-test      # that is print colored output of abc-test
    $ tools/colorlog abc

    $ tools/colorlog abc delete_id # color even lines containing text 'delete_id'
    $ tools/colorlog abc done '\033[0;31m' # color even lines containing text
                                           # done with given color

=== Versioning ===

WIT versioning should follow wayland's versioning e. g. WIT tests for wayland
of version a.b.c should have version a.b.c (or higher, considering backward
compability). Following this rule, it is possible that WIT versions will be
unconsistent (for example 1.2, 1.2.1, 1.2.9 - we wrote tests for 1.2., 1.2.1 and
then we changed/wrote new tests for wayland 1.2.9 and tests for versions between
this range are missing).

The tests can be run using any version of wayland - only warrning is invoked
when the version is lower than it should be.
